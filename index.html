<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>GlobalChat Bookmarklet Installer</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:#0f0f13;color:#e2e2ef;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
  .card{background:#1e1e2a;border-radius:20px;padding:40px;max-width:480px;width:100%;text-align:center;box-shadow:0 8px 40px rgba(0,0,0,0.4)}
  .logo{font-size:56px;margin-bottom:16px}
  h1{font-size:26px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,#6366f1,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .sub{color:#888;font-size:14px;line-height:1.6;margin-bottom:32px}
  .bookmark-btn{
    display:inline-block;
    background:linear-gradient(135deg,#6366f1,#8b5cf6);
    color:#fff;
    padding:14px 28px;
    border-radius:12px;
    font-size:16px;
    font-weight:700;
    text-decoration:none;
    cursor:grab;
    box-shadow:0 4px 20px rgba(99,102,241,0.4);
    transition:transform 0.15s,box-shadow 0.15s;
    user-select:none;
  }
  .bookmark-btn:hover{transform:translateY(-2px);box-shadow:0 6px 28px rgba(99,102,241,0.5)}
  .bookmark-btn:active{cursor:grabbing}
  .instructions{margin-top:28px;background:#0f0f13;border-radius:12px;padding:20px;text-align:left}
  .instructions h2{font-size:13px;font-weight:700;color:#6366f1;text-transform:uppercase;letter-spacing:0.08em;margin-bottom:12px}
  .step{display:flex;gap:12px;margin-bottom:10px;align-items:flex-start;font-size:13px;color:#aaa;line-height:1.5}
  .step-num{background:#6366f1;color:#fff;width:20px;height:20px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0;margin-top:1px}
  .warning{margin-top:20px;font-size:12px;color:#555;line-height:1.5}
  code{background:#0f0f13;padding:2px 6px;border-radius:4px;font-size:12px;color:#a78bfa}
</style>
</head>
<body>
<div class="card">
  <div class="logo">ðŸ’¬</div>
  <h1>GlobalChat</h1>
  <p class="sub">A global chatroom that floats on top of any website.<br>Just drag the button to your bookmarks bar.</p>

  <a class="bookmark-btn" href="javascript:(function()%7B'use%20strict'%3Bif(document.getElementById('__globalchat__'))%7Bdocument.getElementById('__globalchat__').style.display%3D'flex'%3Breturn%3B%7Dconst%20LS_TOKEN%3D'__gc_token__'%3Bconst%20LS_USER%3D'__gc_user__'%3Bconst%20LS_SERVER%3D'__gc_server__'%3Bfunction%20getStorage(k)%7Btry%7Breturn%20localStorage.getItem(k)%3B%7Dcatch%7Breturn%20null%3B%7D%7Dfunction%20setStorage(k%2Cv)%7Btry%7BlocalStorage.setItem(k%2Cv)%3B%7Dcatch%7B%7D%7Dfunction%20delStorage(k)%7Btry%7BlocalStorage.removeItem(k)%3B%7Dcatch%7B%7D%7Dlet%20SERVER_URL%3DgetStorage(LS_SERVER)%7C%7C''%3Blet%20userToken%3DgetStorage(LS_TOKEN)%3Blet%20username%3DgetStorage(LS_USER)%3Blet%20eventSource%3Dnull%3Blet%20isMinimized%3Dfalse%3Blet%20unreadCount%3D0%3Bconst%20style%3Ddocument.createElement('style')%3Bstyle.id%3D'__globalchat_style__'%3Bstyle.textContent%3D%60%20%23__globalchat__%7Ball%3Ainitial%3Bposition%3Afixed%3Bbottom%3A24px%3Bright%3A24px%3Bwidth%3A340px%3Bheight%3A480px%3Bfont-family%3A-apple-system%2CBlinkMacSystemFont%2C'Segoe%20UI'%2Csans-serif%3Bfont-size%3A14px%3Bz-index%3A2147483647%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Bborder-radius%3A16px%3Boverflow%3Ahidden%3Bbox-shadow%3A0%208px%2040px%20rgba(0%2C0%2C0%2C0.28)%2C0%202px%208px%20rgba(0%2C0%2C0%2C0.12)%3Btransition%3Aheight%200.25s%20cubic-bezier(.4%2C0%2C.2%2C1)%3B%7D%23__globalchat__.gc-minimized%7Bheight%3A48px%3B%7D%23__globalchat__*%7Bbox-sizing%3Aborder-box%3Bmargin%3A0%3Bpadding%3A0%3B%7D.gc-header%7Bbackground%3Alinear-gradient(135deg%2C%236366f1%200%25%2C%238b5cf6%20100%25)%3Bpadding%3A0%2014px%3Bheight%3A48px%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Aspace-between%3Bcursor%3Apointer%3Buser-select%3Anone%3Bflex-shrink%3A0%3B%7D.gc-header-left%7Bdisplay%3Aflex%3Balign-items%3Acenter%3Bgap%3A8px%3B%7D.gc-logo%7Bwidth%3A22px%3Bheight%3A22px%3Bbackground%3Argba(255%2C255%2C255%2C0.2)%3Bborder-radius%3A6px%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bfont-size%3A13px%3B%7D.gc-title%7Bcolor%3A%23fff%3Bfont-weight%3A700%3Bfont-size%3A14px%3Bletter-spacing%3A0.02em%3B%7D.gc-badge%7Bbackground%3A%23f43f5e%3Bcolor%3A%23fff%3Bborder-radius%3A99px%3Bfont-size%3A10px%3Bfont-weight%3A700%3Bmin-width%3A18px%3Bheight%3A18px%3Bpadding%3A0%205px%3Bdisplay%3Anone%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3B%7D.gc-badge.visible%7Bdisplay%3Aflex%3B%7D.gc-header-right%7Bdisplay%3Aflex%3Balign-items%3Acenter%3Bgap%3A6px%3B%7D.gc-online%7Bfont-size%3A11px%3Bcolor%3Argba(255%2C255%2C255%2C0.75)%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bgap%3A4px%3B%7D.gc-online-dot%7Bwidth%3A7px%3Bheight%3A7px%3Bbackground%3A%234ade80%3Bborder-radius%3A50%25%3B%7D.gc-btn%7Bbackground%3Argba(255%2C255%2C255%2C0.15)%3Bborder%3Anone%3Bcolor%3A%23fff%3Bwidth%3A26px%3Bheight%3A26px%3Bborder-radius%3A6px%3Bcursor%3Apointer%3Bfont-size%3A14px%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Btransition%3Abackground%200.15s%3B%7D.gc-btn%3Ahover%7Bbackground%3Argba(255%2C255%2C255%2C0.3)%3B%7D.gc-body%7Bflex%3A1%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Bbackground%3A%230f0f13%3Boverflow%3Ahidden%3B%7D.gc-messages%7Bflex%3A1%3Boverflow-y%3Aauto%3Bpadding%3A12px%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Bgap%3A8px%3Bscroll-behavior%3Asmooth%3B%7D.gc-messages%3A%3A-webkit-scrollbar%7Bwidth%3A4px%3B%7D.gc-messages%3A%3A-webkit-scrollbar-track%7Bbackground%3Atransparent%3B%7D.gc-messages%3A%3A-webkit-scrollbar-thumb%7Bbackground%3A%23333%3Bborder-radius%3A2px%3B%7D.gc-msg%7Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Bgap%3A2px%3Banimation%3Agc-fadein%200.18s%20ease%3B%7D%40keyframes%20gc-fadein%7Bfrom%7Bopacity%3A0%3Btransform%3AtranslateY(6px)%3B%7Dto%7Bopacity%3A1%3Btransform%3AtranslateY(0)%3B%7D%7D.gc-msg.gc-own%20.gc-bubble%7Bbackground%3Alinear-gradient(135deg%2C%236366f1%2C%238b5cf6)%3Bcolor%3A%23fff%3Balign-self%3Aflex-end%3Bborder-radius%3A16px%204px%2016px%2016px%3B%7D.gc-msg.gc-own%20.gc-meta%7Balign-self%3Aflex-end%3B%7D.gc-bubble%7Bbackground%3A%231e1e2a%3Bcolor%3A%23e2e2ef%3Bborder-radius%3A4px%2016px%2016px%2016px%3Bpadding%3A8px%2012px%3Bmax-width%3A85%25%3Balign-self%3Aflex-start%3Bline-height%3A1.45%3Bword-break%3Abreak-word%3B%7D.gc-meta%7Bfont-size%3A10px%3Bcolor%3A%23555%3Bpadding%3A0%204px%3Balign-self%3Aflex-start%3Bdisplay%3Aflex%3Bgap%3A4px%3B%7D.gc-meta-user%7Bcolor%3A%237c7caa%3Bfont-weight%3A600%3B%7D.gc-system-msg%7Btext-align%3Acenter%3Bfont-size%3A11px%3Bcolor%3A%23444%3Bpadding%3A2px%200%3B%7D.gc-input-area%7Bpadding%3A10px%3Bborder-top%3A1px%20solid%20%231e1e2a%3Bdisplay%3Aflex%3Bgap%3A8px%3Balign-items%3Aflex-end%3Bbackground%3A%230f0f13%3Bflex-shrink%3A0%3B%7D.gc-input%7Bflex%3A1%3Bbackground%3A%231e1e2a%3Bborder%3A1px%20solid%20%232a2a3a%3Bborder-radius%3A10px%3Bcolor%3A%23e2e2ef%3Bpadding%3A8px%2012px%3Bfont-size%3A13px%3Bfont-family%3Ainherit%3Bresize%3Anone%3Boutline%3Anone%3Bmax-height%3A90px%3Bline-height%3A1.4%3Btransition%3Aborder-color%200.15s%3B%7D.gc-input%3A%3Aplaceholder%7Bcolor%3A%23444%3B%7D.gc-input%3Afocus%7Bborder-color%3A%236366f1%3B%7D.gc-send%7Bbackground%3Alinear-gradient(135deg%2C%236366f1%2C%238b5cf6)%3Bborder%3Anone%3Bcolor%3A%23fff%3Bwidth%3A36px%3Bheight%3A36px%3Bborder-radius%3A10px%3Bcursor%3Apointer%3Bfont-size%3A16px%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bflex-shrink%3A0%3Btransition%3Aopacity%200.15s%3B%7D.gc-send%3Ahover%7Bopacity%3A0.85%3B%7D.gc-send%3Adisabled%7Bopacity%3A0.35%3Bcursor%3Adefault%3B%7D.gc-register%7Bflex%3A1%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bgap%3A14px%3Bpadding%3A24px%3Bbackground%3A%230f0f13%3B%7D.gc-register%20p%7Bcolor%3A%23888%3Bfont-size%3A13px%3Btext-align%3Acenter%3Bline-height%3A1.5%3B%7D.gc-register-input%7Bwidth%3A100%25%3Bbackground%3A%231e1e2a%3Bborder%3A1px%20solid%20%232a2a3a%3Bborder-radius%3A10px%3Bcolor%3A%23e2e2ef%3Bpadding%3A10px%2014px%3Bfont-size%3A14px%3Bfont-family%3Ainherit%3Boutline%3Anone%3Btransition%3Aborder-color%200.15s%3B%7D.gc-register-input%3Afocus%7Bborder-color%3A%236366f1%3B%7D.gc-register-btn%7Bwidth%3A100%25%3Bbackground%3Alinear-gradient(135deg%2C%236366f1%2C%238b5cf6)%3Bborder%3Anone%3Bcolor%3A%23fff%3Bpadding%3A10px%3Bborder-radius%3A10px%3Bfont-size%3A14px%3Bfont-weight%3A600%3Bcursor%3Apointer%3Bfont-family%3Ainherit%3Btransition%3Aopacity%200.15s%3B%7D.gc-register-btn%3Ahover%7Bopacity%3A0.85%3B%7D.gc-error%7Bcolor%3A%23f43f5e%3Bfont-size%3A12px%3Btext-align%3Acenter%3B%7D.gc-connecting%7Bflex%3A1%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bcolor%3A%23555%3Bfont-size%3A13px%3Bgap%3A8px%3B%7D.gc-spinner%7Bwidth%3A16px%3Bheight%3A16px%3Bborder%3A2px%20solid%20%23333%3Bborder-top-color%3A%236366f1%3Bborder-radius%3A50%25%3Banimation%3Agc-spin%200.7s%20linear%20infinite%3B%7D%40keyframes%20gc-spin%7Bto%7Btransform%3Arotate(360deg)%3B%7D%7D.gc-server-setup%7Bflex%3A1%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bgap%3A14px%3Bpadding%3A24px%3Bbackground%3A%230f0f13%3B%7D.gc-server-setup%20p%7Bcolor%3A%23888%3Bfont-size%3A13px%3Btext-align%3Acenter%3Bline-height%3A1.5%3B%7D.gc-server-setup%20.gc-label%7Bwidth%3A100%25%3Bfont-size%3A11px%3Bfont-weight%3A700%3Bcolor%3A%236366f1%3Btext-transform%3Auppercase%3Bletter-spacing%3A0.08em%3Btext-align%3Aleft%3Bmargin-bottom%3A-8px%3B%7D.gc-server-hint%7Bfont-size%3A11px%3Bcolor%3A%23444%3Btext-align%3Aleft%3Bwidth%3A100%25%3Bmargin-top%3A-6px%3B%7D.gc-settings-panel%7Bposition%3Aabsolute%3Btop%3A48px%3Bright%3A0%3Bwidth%3A100%25%3Bbackground%3A%231a1a26%3Bborder-bottom%3A1px%20solid%20%232a2a3a%3Bpadding%3A14px%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Bgap%3A10px%3Bz-index%3A10%3Banimation%3Agc-fadein%200.15s%20ease%3B%7D.gc-settings-panel%20.gc-label%7Bfont-size%3A11px%3Bfont-weight%3A700%3Bcolor%3A%236366f1%3Btext-transform%3Auppercase%3Bletter-spacing%3A0.08em%3B%7D.gc-settings-row%7Bdisplay%3Aflex%3Bgap%3A8px%3Balign-items%3Acenter%3B%7D.gc-settings-row%20input%7Bflex%3A1%3Bbackground%3A%230f0f13%3Bborder%3A1px%20solid%20%232a2a3a%3Bborder-radius%3A8px%3Bcolor%3A%23e2e2ef%3Bpadding%3A7px%2010px%3Bfont-size%3A12px%3Bfont-family%3Ainherit%3Boutline%3Anone%3B%7D.gc-settings-row%20input%3Afocus%7Bborder-color%3A%236366f1%3B%7D.gc-settings-save%7Bbackground%3A%236366f1%3Bborder%3Anone%3Bcolor%3A%23fff%3Bpadding%3A7px%2014px%3Bborder-radius%3A8px%3Bfont-size%3A12px%3Bfont-weight%3A600%3Bcursor%3Apointer%3Bfont-family%3Ainherit%3Bwhite-space%3Anowrap%3B%7D.gc-settings-save%3Ahover%7Bopacity%3A0.85%3B%7D.gc-settings-divider%7Bborder%3Anone%3Bborder-top%3A1px%20solid%20%232a2a3a%3Bmargin%3A0%3B%7D.gc-settings-danger%7Bbackground%3Anone%3Bborder%3A1px%20solid%20%23f43f5e44%3Bcolor%3A%23f43f5e%3Bpadding%3A6px%2012px%3Bborder-radius%3A8px%3Bfont-size%3A12px%3Bcursor%3Apointer%3Bfont-family%3Ainherit%3Bwidth%3A100%25%3B%7D.gc-settings-danger%3Ahover%7Bbackground%3A%23f43f5e22%3B%7D.gc-current-server%7Bfont-size%3A11px%3Bcolor%3A%23555%3Bword-break%3Abreak-all%3B%7D.gc-current-server%20span%7Bcolor%3A%237c7caa%3B%7D%60%3Bdocument.head.appendChild(style)%3Bconst%20root%3Ddocument.createElement('div')%3Broot.id%3D'__globalchat__'%3Broot.innerHTML%3D%60%3Cdiv%20class%3D%22gc-header%22%20id%3D%22gc-header%22%3E%3Cdiv%20class%3D%22gc-header-left%22%3E%3Cdiv%20class%3D%22gc-logo%22%3E%F0%9F%92%AC%3C%2Fdiv%3E%3Cspan%20class%3D%22gc-title%22%3EGlobalChat%3C%2Fspan%3E%3Cspan%20class%3D%22gc-badge%22%20id%3D%22gc-badge%22%3E0%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-header-right%22%3E%3Cspan%20class%3D%22gc-online%22%3E%3Cspan%20class%3D%22gc-online-dot%22%3E%3C%2Fspan%3E%3Cspan%20id%3D%22gc-online-count%22%3E%E2%80%94%3C%2Fspan%3E%3C%2Fspan%3E%3Cbutton%20class%3D%22gc-btn%22%20id%3D%22gc-settings-btn%22%20title%3D%22Settings%22%3E%E2%9A%99%3C%2Fbutton%3E%3Cbutton%20class%3D%22gc-btn%22%20id%3D%22gc-close-btn%22%20title%3D%22Close%22%3E%E2%9C%95%3C%2Fbutton%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-body%22%20id%3D%22gc-body%22%3E%3Cdiv%20class%3D%22gc-connecting%22%20id%3D%22gc-connecting%22%3E%3Cdiv%20class%3D%22gc-spinner%22%3E%3C%2Fdiv%3EConnecting%E2%80%A6%3C%2Fdiv%3E%3C%2Fdiv%3E%60%3Bdocument.body.appendChild(root)%3B(function%20initDrag()%7Bconst%20header%3Droot.querySelector('%23gc-header')%3Blet%20dragging%3Dfalse%2Cox%2Coy%3Bheader.addEventListener('mousedown'%2Ce%3D%3E%7Bif(e.target.closest('.gc-btn'))return%3Bdragging%3Dtrue%3Bconst%20rect%3Droot.getBoundingClientRect()%3Box%3De.clientX-rect.left%3Boy%3De.clientY-rect.top%3B%7D)%3Bdocument.addEventListener('mousemove'%2Ce%3D%3E%7Bif(!dragging)return%3Blet%20l%3De.clientX-ox%3Blet%20t%3De.clientY-oy%3Bl%3DMath.max(0%2CMath.min(window.innerWidth-root.offsetWidth%2Cl))%3Bt%3DMath.max(0%2CMath.min(window.innerHeight-root.offsetHeight%2Ct))%3Broot.style.right%3D'auto'%3Broot.style.bottom%3D'auto'%3Broot.style.left%3Dl%2B'px'%3Broot.style.top%3Dt%2B'px'%3B%7D)%3Bdocument.addEventListener('mouseup'%2C()%3D%3E%7Bdragging%3Dfalse%3B%7D)%3B%7D)()%3Broot.querySelector('%23gc-header').addEventListener('click'%2Ce%3D%3E%7Bif(e.target.closest('.gc-btn'))return%3BisMinimized%3D!isMinimized%3Broot.classList.toggle('gc-minimized'%2CisMinimized)%3Bif(!isMinimized)%7BunreadCount%3D0%3BupdateBadge()%3B%7D%7D)%3Broot.querySelector('%23gc-close-btn').addEventListener('click'%2Ce%3D%3E%7Be.stopPropagation()%3Broot.style.display%3D'none'%3Bif(eventSource)%7BeventSource.close()%3BeventSource%3Dnull%3B%7D%7D)%3Blet%20settingsOpen%3Dfalse%3Broot.querySelector('%23gc-settings-btn').addEventListener('click'%2Ce%3D%3E%7Be.stopPropagation()%3Bconst%20existing%3Droot.querySelector('.gc-settings-panel')%3Bif(existing)%7Bexisting.remove()%3BsettingsOpen%3Dfalse%3Breturn%3B%7DsettingsOpen%3Dtrue%3Bconst%20panel%3Ddocument.createElement('div')%3Bpanel.className%3D'gc-settings-panel'%3Bpanel.innerHTML%3D%60%3Cdiv%20class%3D%22gc-label%22%3EServer%20URL%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-current-server%22%3ECurrent%3A%3Cspan%3E%24%7BSERVER_URL%7C%7C'not%20set'%7D%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-settings-row%22%3E%3Cinput%20id%3D%22gc-server-input%22%20type%3D%22url%22%20placeholder%3D%22https%3A%2F%2Fyour-server.com%22%20value%3D%22%24%7BSERVER_URL%7D%22%2F%3E%3Cbutton%20class%3D%22gc-settings-save%22%20id%3D%22gc-server-save%22%3ESave%3C%2Fbutton%3E%3C%2Fdiv%3E%3Chr%20class%3D%22gc-settings-divider%22%2F%3E%3Cbutton%20class%3D%22gc-settings-danger%22%20id%3D%22gc-reset-btn%22%3E%E2%9A%A0%20Reset%20account(clear%20username%26amp%3Btoken)%3C%2Fbutton%3E%60%3Broot.style.position%3D'relative'%3Broot.appendChild(panel)%3Bpanel.querySelector('%23gc-server-save').addEventListener('click'%2C()%3D%3E%7Bconst%20val%3Dpanel.querySelector('%23gc-server-input').value.trim().replace(%2F%5C%2F%24%2F%2C'')%3Bif(!val)return%3BSERVER_URL%3Dval%3BsetStorage(LS_SERVER%2CSERVER_URL)%3Bpanel.remove()%3BsettingsOpen%3Dfalse%3Bif(userToken%26%26username)%7BshowChat()%3B%7Delse%7BshowRegister()%3B%7D%7D)%3Bpanel.querySelector('%23gc-server-input').addEventListener('keydown'%2Ce%3D%3E%7Bif(e.key%3D%3D%3D'Enter')panel.querySelector('%23gc-server-save').click()%3Bif(e.key%3D%3D%3D'Escape')%7Bpanel.remove()%3BsettingsOpen%3Dfalse%3B%7D%7D)%3Bpanel.querySelector('%23gc-reset-btn').addEventListener('click'%2C()%3D%3E%7Bif(!confirm('Reset%20your%20account%3FYou%20will%20need%20to%20pick%20a%20new%20username.'))return%3BdelStorage(LS_TOKEN)%3BdelStorage(LS_USER)%3BuserToken%3Dnull%3Busername%3Dnull%3Bif(eventSource)%7BeventSource.close()%3BeventSource%3Dnull%3B%7Dpanel.remove()%3BsettingsOpen%3Dfalse%3BshowRegister()%3B%7D)%3B%7D)%3Bconst%20body%3Droot.querySelector('%23gc-body')%3Bfunction%20setBody(html)%7Bbody.innerHTML%3Dhtml%3B%7Dfunction%20showConnecting()%7BsetBody(%60%3Cdiv%20class%3D%22gc-connecting%22%20id%3D%22gc-connecting%22%3E%3Cdiv%20class%3D%22gc-spinner%22%3E%3C%2Fdiv%3EConnecting%E2%80%A6%3C%2Fdiv%3E%60)%3B%7Dfunction%20updateBadge()%7Bconst%20b%3Droot.querySelector('%23gc-badge')%3Bif(!b)return%3Bif(unreadCount%3E0%26%26isMinimized)%7Bb.textContent%3DunreadCount%3E99%3F'99%2B'%3AunreadCount%3Bb.classList.add('visible')%3B%7Delse%7Bb.classList.remove('visible')%3B%7D%7Dfunction%20updateOnlineCount()%7Bfetch(%60%24%7BSERVER_URL%7D%2Fapi%2Fstats%60).then(r%3D%3Er.json()).then(d%3D%3E%7Bconst%20el%3Droot.querySelector('%23gc-online-count')%3Bif(el)el.textContent%3Dd.onlineCount%3B%7D).catch(()%3D%3E%7B%7D)%3B%7Dfunction%20formatTime(ts)%7Bconst%20d%3Dnew%20Date(ts)%3Breturn%20d.toLocaleTimeString(%5B%5D%2C%7Bhour%3A'2-digit'%2Cminute%3A'2-digit'%7D)%3B%7Dfunction%20appendMessage(msg)%7Bconst%20list%3Droot.querySelector('%23gc-messages')%3Bif(!list)return%3Bconst%20isOwn%3Dmsg.username%3D%3D%3Dusername%3Bconst%20el%3Ddocument.createElement('div')%3Bel.className%3D%60gc-msg%24%7BisOwn%3F'%20gc-own'%3A''%7D%60%3Bel.innerHTML%3D%60%3Cdiv%20class%3D%22gc-bubble%22%3E%24%7Bmsg.text%7D%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-meta%22%3E%3Cspan%20class%3D%22gc-meta-user%22%3E%24%7Bmsg.username%7D%3C%2Fspan%3E%3Cspan%3E%24%7BformatTime(msg.timestamp)%7D%3C%2Fspan%3E%3C%2Fdiv%3E%60%3Blist.appendChild(el)%3Blist.scrollTop%3Dlist.scrollHeight%3Bif(isMinimized)%7BunreadCount%2B%2B%3BupdateBadge()%3B%7D%7Dfunction%20appendSystem(text)%7Bconst%20list%3Droot.querySelector('%23gc-messages')%3Bif(!list)return%3Bconst%20el%3Ddocument.createElement('div')%3Bel.className%3D'gc-system-msg'%3Bel.textContent%3Dtext%3Blist.appendChild(el)%3Blist.scrollTop%3Dlist.scrollHeight%3B%7Dfunction%20showServerSetup()%7BsetBody(%60%3Cdiv%20class%3D%22gc-server-setup%22%3E%3Cdiv%20class%3D%22gc-logo%22%20style%3D%22font-size%3A32px%3Bwidth%3Aauto%3Bheight%3Aauto%3Bbackground%3Anone%3B%22%3E%F0%9F%8C%90%3C%2Fdiv%3E%3Cp%3EEnter%20your%20GlobalChat%20server%20URL.%3Cbr%3EThis%20is%20saved%20and%20used%20on%20every%20site.%3C%2Fp%3E%3Cdiv%20class%3D%22gc-label%22%3EServer%20URL%3C%2Fdiv%3E%3Cinput%20class%3D%22gc-register-input%22%20id%3D%22gc-server-url-input%22%20type%3D%22url%22%20placeholder%3D%22https%3A%2F%2Fchatting-yfxz.onrender.com%22%20value%3D%22https%3A%2F%2Fchatting-yfxz.onrender.com%22%20autocomplete%3D%22off%22%2F%3E%3Cdiv%20class%3D%22gc-server-hint%22%3EYou%20can%20change%20this%20later%20in%20settings%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-error%22%20id%3D%22gc-server-error%22%3E%3C%2Fdiv%3E%3Cbutton%20class%3D%22gc-register-btn%22%20id%3D%22gc-server-connect-btn%22%3EConnect%3C%2Fbutton%3E%3C%2Fdiv%3E%60)%3Bconst%20input%3Droot.querySelector('%23gc-server-url-input')%3Bconst%20btn%3Droot.querySelector('%23gc-server-connect-btn')%3Bconst%20err%3Droot.querySelector('%23gc-server-error')%3Binput.focus()%3Binput.select()%3Bfunction%20tryConnect()%7Bconst%20val%3Dinput.value.trim().replace(%2F%5C%2F%24%2F%2C'')%3Bif(!val)%7Berr.textContent%3D'Please%20enter%20a%20server%20URL.'%3Breturn%3B%7Derr.textContent%3D''%3Bbtn.disabled%3Dtrue%3Bbtn.textContent%3D'Connecting%E2%80%A6'%3Bfetch(%60%24%7Bval%7D%2Fapi%2Fstats%60).then(r%3D%3E%7Bif(!r.ok)throw%20new%20Error()%3Breturn%20r.json()%3B%7D).then(()%3D%3E%7BSERVER_URL%3Dval%3BsetStorage(LS_SERVER%2CSERVER_URL)%3BshowRegister()%3B%7D).catch(()%3D%3E%7Berr.textContent%3D'Could%20not%20reach%20that%20server.%20Check%20the%20URL%20and%20try%20again.'%3Bbtn.disabled%3Dfalse%3Bbtn.textContent%3D'Connect'%3B%7D)%3B%7Dbtn.addEventListener('click'%2CtryConnect)%3Binput.addEventListener('keydown'%2Ce%3D%3E%7Bif(e.key%3D%3D%3D'Enter')tryConnect()%3B%7D)%3B%7Dfunction%20showRegister()%7BsetBody(%60%3Cdiv%20class%3D%22gc-register%22%3E%3Cdiv%20class%3D%22gc-logo%22%20style%3D%22font-size%3A32px%3Bwidth%3Aauto%3Bheight%3Aauto%3Bbackground%3Anone%3B%22%3E%F0%9F%92%AC%3C%2Fdiv%3E%3Cp%3EJoin%20the%20global%20chat!%3Cbr%3EPick%20a%20username%20to%20get%20started.%3C%2Fp%3E%3Cinput%20class%3D%22gc-register-input%22%20id%3D%22gc-name-input%22%20placeholder%3D%22Your%20username%E2%80%A6%22%20maxlength%3D%2224%22%20autocomplete%3D%22off%22%2F%3E%3Cdiv%20class%3D%22gc-error%22%20id%3D%22gc-reg-error%22%3E%3C%2Fdiv%3E%3Cbutton%20class%3D%22gc-register-btn%22%20id%3D%22gc-join-btn%22%3EJoin%20Chat%3C%2Fbutton%3E%3C%2Fdiv%3E%60)%3Bconst%20input%3Droot.querySelector('%23gc-name-input')%3Bconst%20btn%3Droot.querySelector('%23gc-join-btn')%3Bconst%20err%3Droot.querySelector('%23gc-reg-error')%3Binput.focus()%3Bfunction%20tryJoin()%7Bconst%20name%3Dinput.value.trim()%3Bif(!name)%7Berr.textContent%3D'Please%20enter%20a%20username.'%3Breturn%3B%7Derr.textContent%3D''%3Bbtn.disabled%3Dtrue%3Bbtn.textContent%3D'Joining%E2%80%A6'%3Bfetch(%60%24%7BSERVER_URL%7D%2Fapi%2Fregister%60%2C%7Bmethod%3A'POST'%2Cheaders%3A%7B'Content-Type'%3A'application%2Fjson'%7D%2Cbody%3AJSON.stringify(%7Busername%3Aname%7D)%7D).then(r%3D%3Er.json()).then(d%3D%3E%7Bif(d.error)%7Berr.textContent%3Dd.error%3Bbtn.disabled%3Dfalse%3Bbtn.textContent%3D'Join%20Chat'%3Breturn%3B%7DuserToken%3Dd.token%3Busername%3Dd.username%3BsetStorage(LS_TOKEN%2CuserToken)%3BsetStorage(LS_USER%2Cusername)%3BshowChat()%3B%7D).catch(()%3D%3E%7Berr.textContent%3D'Could%20not%20reach%20server.%20Is%20it%20running%3F'%3Bbtn.disabled%3Dfalse%3Bbtn.textContent%3D'Join%20Chat'%3B%7D)%3B%7Dbtn.addEventListener('click'%2CtryJoin)%3Binput.addEventListener('keydown'%2Ce%3D%3E%7Bif(e.key%3D%3D%3D'Enter')tryJoin()%3B%7D)%3B%7Dfunction%20showChat()%7BsetBody(%60%3Cdiv%20class%3D%22gc-messages%22%20id%3D%22gc-messages%22%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22gc-input-area%22%3E%3Ctextarea%20class%3D%22gc-input%22%20id%3D%22gc-input%22%20placeholder%3D%22Message%20everyone%E2%80%A6%22%20rows%3D%221%22%20maxlength%3D%22500%22%3E%3C%2Ftextarea%3E%3Cbutton%20class%3D%22gc-send%22%20id%3D%22gc-send-btn%22%3E%E2%9E%A4%3C%2Fbutton%3E%3C%2Fdiv%3E%60)%3Bconst%20input%3Droot.querySelector('%23gc-input')%3Bconst%20sendBtn%3Droot.querySelector('%23gc-send-btn')%3Binput.addEventListener('input'%2C()%3D%3E%7Binput.style.height%3D'auto'%3Binput.style.height%3DMath.min(input.scrollHeight%2C90)%2B'px'%3B%7D)%3Bfunction%20sendMessage()%7Bconst%20text%3Dinput.value.trim()%3Bif(!text)return%3Binput.value%3D''%3Binput.style.height%3D'auto'%3BsendBtn.disabled%3Dtrue%3Bfetch(%60%24%7BSERVER_URL%7D%2Fapi%2Fmessages%60%2C%7Bmethod%3A'POST'%2Cheaders%3A%7B'Content-Type'%3A'application%2Fjson'%2C'X-User-Token'%3AuserToken%7D%2Cbody%3AJSON.stringify(%7Btext%7D)%7D).then(r%3D%3Er.json()).then(d%3D%3E%7Bif(d.error)appendSystem(%60%E2%9A%A0%20%24%7Bd.error%7D%60)%3B%7D).catch(()%3D%3EappendSystem('%E2%9A%A0%20Failed%20to%20send%20message.')).finally(()%3D%3E%7BsendBtn.disabled%3Dfalse%3B%7D)%3B%7DsendBtn.addEventListener('click'%2CsendMessage)%3Binput.addEventListener('keydown'%2Ce%3D%3E%7Bif(e.key%3D%3D%3D'Enter'%26%26!e.shiftKey)%7Be.preventDefault()%3BsendMessage()%3B%7D%7D)%3BconnectSSE()%3BupdateOnlineCount()%3BsetInterval(updateOnlineCount%2C15_000)%3B%7Dfunction%20connectSSE()%7Bif(eventSource)%7BeventSource.close()%3B%7DeventSource%3Dnew%20EventSource(%60%24%7BSERVER_URL%7D%2Fapi%2Fstream%60)%3BeventSource.addEventListener('connected'%2Ce%3D%3E%7Bconst%20data%3DJSON.parse(e.data)%3Bconst%20list%3Droot.querySelector('%23gc-messages')%3Bif(!list)return%3Blist.innerHTML%3D''%3Bif(data.messages.length%3D%3D%3D0)%7BappendSystem('No%20messages%20yet.%20Say%20hello!%F0%9F%91%8B')%3B%7Delse%7Bdata.messages.forEach(appendMessage)%3BappendSystem('%E2%80%94%20End%20of%20recent%20history%20%E2%80%94')%3B%7D%7D)%3BeventSource.addEventListener('message'%2Ce%3D%3E%7Bconst%20msg%3DJSON.parse(e.data)%3BappendMessage(msg)%3B%7D)%3BeventSource.onerror%3D()%3D%3E%7BappendSystem('%E2%9A%A0%20Connection%20lost.%20Reconnecting%E2%80%A6')%3B%7D%3B%7Dif(!SERVER_URL)%7BshowServerSetup()%3B%7Delse%20if(userToken%26%26username)%7BshowChat()%3B%7Delse%7BshowRegister()%3B%7D%7D)()%3B" onclick="return false;">
    ðŸ’¬ GlobalChat
  </a>

  <div class="instructions">
    <h2>How to install</h2>
    <div class="step">
      <div class="step-num">1</div>
      <div>Make sure your <strong>bookmarks bar is visible</strong> (Ctrl+Shift+B / Cmd+Shift+B)</div>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <div><strong>Drag</strong> the <code>ðŸ’¬ GlobalChat</code> button above into your bookmarks bar</div>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <div>Visit <strong>any website</strong> and click the bookmark to open the chat panel</div>
    </div>
    <div class="step">
      <div class="step-num">4</div>
      <div>Pick a username on your first visit â€” you're saved automatically after that</div>
    </div>
  </div>

  <p class="warning">
    âš™ Make sure your GlobalChat server is running at
    <code>localhost:3000</code> (or update <code>SERVER_URL</code>
    in <code>bookmarklet-src.js</code> and rebuild).
  </p>
</div>
</body>
</html>
